(this.webpackJsonpautai=this.webpackJsonpautai||[]).push([[0],{10:function(e,t,n){},12:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),a=n(4),i=n.n(a),l=(n(9),n(10),n(2)),c=n(0);const s={InputLayer:e=>{let{inputShape:t=[28,28,1]}=e;return Object(c.jsxs)("div",{style:{userSelect:"none"},children:[Object(c.jsx)("h4",{style:{margin:0,fontSize:16,color:"#ffffff",userSelect:"none",fontWeight:600,textShadow:"0 1px 2px rgba(0, 0, 0, 0.3)"},children:"Input Layer"}),Object(c.jsxs)("div",{style:{fontSize:13,color:"#b0b8c4",userSelect:"none",marginTop:6,background:"rgba(255, 255, 255, 0.05)",padding:"6px 10px",borderRadius:8,border:"1px solid rgba(255, 255, 255, 0.1)"},children:["Shape: [",t.join(", "),"]"]})]})},Conv2DLayer:e=>{let{filterSize:t=3,numFilters:n=32,activationFunction:o="relu"}=e;const[a,i]=Object(r.useState)(t),[l,s]=Object(r.useState)(n),[d,p]=Object(r.useState)(o);return Object(c.jsxs)("div",{className:"conv2d-layer",style:{userSelect:"none"},children:[Object(c.jsx)("h4",{style:{color:"#ffffff",margin:0,fontSize:16,userSelect:"none",fontWeight:600,textShadow:"0 1px 2px rgba(0, 0, 0, 0.3)"},children:"Conv2D Layer"}),Object(c.jsxs)("div",{style:{marginTop:10,background:"rgba(255, 255, 255, 0.05)",padding:"10px",borderRadius:8,border:"1px solid rgba(255, 255, 255, 0.1)"},children:[Object(c.jsxs)("div",{style:{marginBottom:8,userSelect:"none"},children:[Object(c.jsx)("label",{style:{color:"#b0b8c4",fontSize:12,userSelect:"none",fontWeight:500},children:"Filter Size:"}),Object(c.jsx)("input",{type:"number",value:a,onChange:e=>{i(Number(e.target.value))},style:{backgroundColor:"rgba(255, 255, 255, 0.07)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"#ffffff",padding:"4px 8px",borderRadius:"6px",width:"60px",marginLeft:"4px",outline:"none"}})]}),Object(c.jsxs)("div",{style:{marginBottom:8,userSelect:"none"},children:[Object(c.jsx)("label",{style:{color:"#b0b8c4",fontSize:12,userSelect:"none",fontWeight:500},children:"Filters:"}),Object(c.jsx)("input",{type:"number",value:l,onChange:e=>{s(Number(e.target.value))},style:{backgroundColor:"rgba(255, 255, 255, 0.07)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"#ffffff",padding:"4px 8px",borderRadius:"6px",width:"60px",marginLeft:"4px",outline:"none"}})]}),Object(c.jsxs)("div",{style:{marginBottom:4,userSelect:"none"},children:[Object(c.jsx)("label",{style:{color:"#b0b8c4",fontSize:12,userSelect:"none",fontWeight:500},children:"Activation:"}),Object(c.jsxs)("select",{value:d,onChange:e=>{p(e.target.value)},style:{backgroundColor:"rgba(255, 255, 255, 0.07)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"#ffffff",padding:"4px 8px",borderRadius:"6px",marginLeft:"4px",outline:"none"},children:[Object(c.jsx)("option",{value:"relu",children:"ReLU"}),Object(c.jsx)("option",{value:"sigmoid",children:"Sigmoid"}),Object(c.jsx)("option",{value:"tanh",children:"Tanh"})]})]})]}),Object(c.jsxs)("div",{style:{fontSize:12,color:"#8a9db8",marginTop:8,userSelect:"none",padding:"4px 0"},children:[Object(c.jsxs)("div",{children:["Filters: ",Object(c.jsx)("span",{style:{color:"#b5ffb5"},children:l})]}),Object(c.jsxs)("div",{children:["Size: ",Object(c.jsxs)("span",{style:{color:"#b5ffb5"},children:[a,"\xd7",a]})]}),Object(c.jsxs)("div",{children:["Activation: ",Object(c.jsx)("span",{style:{color:"#b5ffb5"},children:d})]})]})]})},OutputLayer:e=>{let{outputShape:t=[10],activationFunction:n="softmax"}=e;const[o,a]=Object(r.useState)(n);return Object(c.jsxs)("div",{style:{userSelect:"none"},children:[Object(c.jsx)("h4",{style:{margin:0,fontSize:16,color:"#ffffff",userSelect:"none",fontWeight:600,textShadow:"0 1px 2px rgba(0, 0, 0, 0.3)"},children:"Output Layer"}),Object(c.jsxs)("div",{style:{fontSize:13,color:"#b0b8c4",userSelect:"none",marginTop:6,background:"rgba(255, 255, 255, 0.05)",padding:"6px 10px",borderRadius:8,border:"1px solid rgba(255, 255, 255, 0.1)"},children:[Object(c.jsxs)("div",{style:{marginBottom:4},children:["Shape: [",t.join(", "),"]"]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{children:"Activation: "}),Object(c.jsxs)("select",{value:o,onChange:e=>{a(e.target.value)},style:{backgroundColor:"rgba(40, 44, 52, 0.9)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"#ffffff",padding:"2px 4px",borderRadius:"4px",fontSize:"12px",outline:"none"},children:[Object(c.jsx)("option",{value:"softmax",style:{backgroundColor:"#2d2d3a",color:"white"},children:"Softmax"}),Object(c.jsx)("option",{value:"sigmoid",style:{backgroundColor:"#2d2d3a",color:"white"},children:"Sigmoid"}),Object(c.jsx)("option",{value:"relu",style:{backgroundColor:"#2d2d3a",color:"white"},children:"ReLU"}),Object(c.jsx)("option",{value:"tanh",style:{backgroundColor:"#2d2d3a",color:"white"},children:"Tanh"}),Object(c.jsx)("option",{value:"none",style:{backgroundColor:"#2d2d3a",color:"white"},children:"None"})]})]})]})]})},ConcatLayer:e=>{let{layers:t=[]}=e;return Object(c.jsxs)("div",{style:{userSelect:"none"},children:[Object(c.jsx)("h4",{style:{margin:0,fontSize:14,color:"#ffffff",userSelect:"none"},children:"Concat Layer"}),Object(c.jsxs)("div",{style:{fontSize:12,color:"#ccc",userSelect:"none"},children:["Inputs: ",t.length]})]})},LinearLayer:e=>{let{inputSize:t=128,outputSize:n=64,bias:o=!0,activation:a="none"}=e;const[i,l]=Object(r.useState)(a);return Object(c.jsxs)("div",{style:{padding:"8px",backgroundColor:"#2a2a2a",borderRadius:"4px",minWidth:"120px",textAlign:"center"},children:[Object(c.jsx)("div",{style:{fontWeight:"bold",marginBottom:"4px",color:"#4caf50"},children:"Linear Layer"}),Object(c.jsxs)("div",{style:{fontSize:"12px",color:"#ccc"},children:["Input: ",t]}),Object(c.jsxs)("div",{style:{fontSize:"12px",color:"#ccc"},children:["Output: ",n]}),Object(c.jsxs)("div",{style:{fontSize:"10px",color:"#888",marginTop:"4px"},children:["Bias: ",o?"Yes":"No"]}),Object(c.jsxs)("div",{style:{fontSize:"10px",color:"#888",marginTop:"4px"},children:[Object(c.jsx)("label",{children:"Activation: "}),Object(c.jsxs)("select",{value:i,onChange:e=>{l(e.target.value)},style:{backgroundColor:"rgba(40, 44, 52, 0.9)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"#ffffff",padding:"2px 4px",borderRadius:"4px",fontSize:"10px",outline:"none"},children:[Object(c.jsx)("option",{value:"relu",style:{backgroundColor:"#2d2d3a",color:"white"},children:"ReLU"}),Object(c.jsx)("option",{value:"sigmoid",style:{backgroundColor:"#2d2d3a",color:"white"},children:"Sigmoid"}),Object(c.jsx)("option",{value:"tanh",style:{backgroundColor:"#2d2d3a",color:"white"},children:"Tanh"}),Object(c.jsx)("option",{value:"none",style:{backgroundColor:"#2d2d3a",color:"white"},children:"None"})]})]})]})},FlattenLayer:e=>{let{startDim:t=1,endDim:n=-1}=e;return Object(c.jsxs)("div",{style:{padding:"8px",backgroundColor:"#2a2a2a",borderRadius:"4px",minWidth:"120px",textAlign:"center"},children:[Object(c.jsx)("div",{style:{fontWeight:"bold",marginBottom:"4px",color:"#ff9800"},children:"Flatten Layer"}),Object(c.jsx)("div",{style:{fontSize:"12px",color:"#ccc"},children:"Reshape to 1D"}),Object(c.jsxs)("div",{style:{fontSize:"10px",color:"#888",marginTop:"4px"},children:["Start Dim: ",t]}),Object(c.jsxs)("div",{style:{fontSize:"10px",color:"#888"},children:["End Dim: ",-1===n?"Last":n]})]})},MaxPoolLayer:e=>{let{poolSize:t=2,stride:n=2,padding:r="valid"}=e;return Object(c.jsxs)("div",{style:{padding:"8px",backgroundColor:"#2a2a2a",borderRadius:"4px",minWidth:"120px",textAlign:"center"},children:[Object(c.jsx)("div",{style:{fontWeight:"bold",marginBottom:"4px",color:"#42a5f5"},children:"MaxPool Layer"}),Object(c.jsxs)("div",{style:{fontSize:"12px",color:"#ccc"},children:["Pool Size: ",t,"\xd7",t]}),Object(c.jsxs)("div",{style:{fontSize:"12px",color:"#ccc"},children:["Stride: ",n]}),Object(c.jsxs)("div",{style:{fontSize:"10px",color:"#888",marginTop:"4px"},children:["Padding: ",r]})]})}},d={InputLayer:{inputShape:[28,28,1]},Conv2DLayer:{filterSize:3,numFilters:32,activationFunction:"relu"},OutputLayer:{outputShape:[10],activationFunction:"softmax"},ConcatLayer:{layers:[]},LinearLayer:{inputSize:128,outputSize:64,bias:!0,activation:"relu"},FlattenLayer:{startDim:1,endDim:-1},MaxPoolLayer:{poolSize:2,stride:2,padding:"valid"}};var p=o.a.forwardRef((e,t)=>{const[n,a]=Object(r.useState)([]),[i,p]=Object(r.useState)([]),[b,x]=Object(r.useState)(null),[u,g]=Object(r.useState)({x:0,y:0}),[f,j]=Object(r.useState)({from:null,to:null}),[h,y]=Object(r.useState)(null),[m,O]=Object(r.useState)(null),[v,S]=Object(r.useState)(null),[w,k]=Object(r.useState)({x:0,y:0,scale:1}),[L,C]=Object(r.useState)(!1),[z,E]=Object(r.useState)({x:0,y:0}),R=Object(r.useRef)(null),T=Object(r.useRef)(null);Object(r.useEffect)(()=>{const e=e=>{const t=document.activeElement;t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement||t instanceof HTMLSelectElement||"Delete"!==e.key&&"Backspace"!==e.key||null===h||(a(e=>e.filter(e=>e.id!==h)),p(e=>e.filter(e=>e.from!==h&&e.to!==h)),y(null),e.preventDefault())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[h]);const M=Object(r.useCallback)(e=>{if(e.cancelable&&e.preventDefault(),!R.current)return;const t=R.current.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top,o=-.001*e.deltaY,a=Math.max(.1,Math.min(3,w.scale+o)),i=n-(n-w.x)*(a/w.scale),l=r-(r-w.y)*(a/w.scale);k({x:i,y:l,scale:a})},[w]),D=Object(r.useCallback)(e=>{(1===e.button||0===e.button&&e.ctrlKey)&&(e.preventDefault(),C(!0),E({x:e.clientX-w.x,y:e.clientY-w.y}))},[w]),W=Object(r.useCallback)(e=>{L&&(e.preventDefault(),k(t=>Object(l.a)(Object(l.a)({},t),{},{x:e.clientX-z.x,y:e.clientY-z.y})))},[L,z]),I=Object(r.useCallback)(()=>{C(!1)},[]),B=Object(r.useCallback)(()=>{k({x:0,y:0,scale:1})},[]),F=Object(r.useCallback)((e,t)=>({x:(e-w.x)/w.scale,y:(t-w.y)/w.scale}),[w]),N=Object(r.useCallback)((e,t)=>({x:e*w.scale+w.x,y:t*w.scale+w.y}),[w]),A=(e,t,n)=>{console.log("Connection start:",{id:e,type:t}),n.preventDefault(),n.stopPropagation(),"output"===t&&(j({from:e,to:null}),console.log("Started connecting from node:",e))},P=(e,t,n)=>{if(console.log("Connection end:",{id:e,type:t,connectingFrom:f.from}),n.preventDefault(),n.stopPropagation(),"input"===t&&null!==f.from&&f.from!==e){const t=i.findIndex(t=>t.from===f.from&&t.to===e);if(-1!==t)console.log("Removing existing connection"),p(e=>e.filter((e,n)=>n!==t));else{console.log("Creating new connection from",f.from,"to",e);const t=f.from;p(n=>[...n,{from:t,to:e}])}}j({from:null,to:null}),O(null),S(null)},Y=()=>({layers:n.map(e=>({id:e.id,type:e.type,parameters:e.parameters,position:{x:e.x,y:e.y}})),connections:i.map(e=>({from:e.from,to:e.to}))});o.a.useImperativeHandle(t,()=>({getModelData:Y}));Object(r.useCallback)((e,t)=>{if(t){const n=t.offsetWidth;a(t=>{const r=t.find(t=>t.id===e);return r&&r.width!==n?t.map(t=>t.id===e?Object(l.a)(Object(l.a)({},t),{},{width:n}):t):t})}},[]);Object(r.useEffect)(()=>{n.forEach(e=>{if(!e.width){const t=document.querySelector('[data-layer-id="'.concat(e.id,'"]'));if(t&&t instanceof HTMLDivElement){const n=t.offsetWidth;a(t=>t.map(t=>t.id===e.id?Object(l.a)(Object(l.a)({},t),{},{width:n}):t))}}})},[n.length]);const H=(e,t)=>{if("input"===t)return{x:e.x-8,y:e.y+50};{const t=e.width||270;return{x:e.x+t+8,y:e.y+50}}};return Object(c.jsxs)("div",{className:"canvas",ref:R,style:{height:"100%",width:"100%",border:"1px solid rgba(255, 255, 255, 0.05)",position:"relative",overflow:"hidden",background:"\n                    linear-gradient(135deg, #111118 0%, #1a1a24 100%)\n                    repeating-linear-gradient(rgba(255, 255, 255, 0.03) 0px, rgba(255, 255, 255, 0.03) 1px, transparent 1px, transparent 20px),\n                    repeating-linear-gradient(90deg, rgba(255, 255, 255, 0.03) 0px, rgba(255, 255, 255, 0.03) 1px, transparent 1px, transparent 20px)\n                ",backgroundSize:"\n                    100% 100%,\n                    20px 20px,\n                    20px 20px\n                ",cursor:L?"grabbing":null!==f.from?"crosshair":"default",boxShadow:"inset 0 0 50px rgba(0, 0, 0, 0.2)"},onWheel:M,onMouseDown:D,onMouseMove:e=>{if(!R.current)return;const t=R.current.getBoundingClientRect(),r=e.clientX-t.left,o=e.clientY-t.top,i=F(r,o);if(W(e),null!==b&&!L){const e=i.x-u.x,t=i.y-u.y;a(n=>n.map(n=>n.id===b?Object(l.a)(Object(l.a)({},n),{},{x:e,y:t}):n))}if(null!==f.from){const e=n.find(e=>e.id===f.from);if(e){const t=H(e,"output"),a=N(t.x,t.y);let i=null,l=30;if(n.forEach(e=>{if(e.id!==f.from){const t=H(e,"input"),n=N(t.x,t.y),a=Math.sqrt(Math.pow(r-n.x,2)+Math.pow(o-n.y,2));a<l&&(l=a,i=e.id)}}),S(i),i){const e=n.find(e=>e.id===i);if(e){const t=H(e,"input"),n=N(t.x,t.y);O({from:a,to:n})}}else O({from:a,to:{x:r,y:o}})}}},onMouseUp:()=>{x(null),g({x:0,y:0}),I(),null!==f.from&&(j({from:null,to:null}),O(null),S(null))},onClick:e=>{e.target===R.current&&y(null)},onDragOver:e=>e.preventDefault(),onDrop:e=>{e.preventDefault();try{var t;const n=e.dataTransfer.getData("text/plain"),r=JSON.parse(n),o=null===(t=R.current)||void 0===t?void 0:t.getBoundingClientRect();if(o){const t=e.clientX-o.left,n=e.clientY-o.top;(e=>{if(!["InputLayer","Conv2DLayer","OutputLayer","ConcatLayer","LinearLayer","FlattenLayer","MaxPoolLayer"].includes(e.type))return;const t=["InputLayer","Conv2DLayer","OutputLayer","ConcatLayer","LinearLayer","FlattenLayer","MaxPoolLayer"].find(t=>t===e.type);if(!t)return;let n=100,r=100;if(void 0!==e.x&&void 0!==e.y){const t=F(e.x,e.y);n=t.x,r=t.y}a(o=>[...o,Object(l.a)(Object(l.a)({},e),{},{type:t,parameters:Object(l.a)({},d[t]),x:n,y:r})])})(Object(l.a)(Object(l.a)({},r),{},{x:t-60,y:n-50}))}}catch(n){console.error("Failed to parse dropped data:",n)}},tabIndex:0,children:[Object(c.jsxs)("div",{style:{position:"absolute",top:10,right:10,zIndex:200,display:"flex",flexDirection:"column",gap:5,background:"linear-gradient(135deg, #151520 0%, #1e1e2d 100%)",padding:8,borderRadius:10,border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 2px 15px rgba(0, 0, 0, 0.2)"},children:[Object(c.jsx)("button",{onClick:()=>k(e=>Object(l.a)(Object(l.a)({},e),{},{scale:Math.min(3,1.2*e.scale)})),style:{background:"linear-gradient(135deg, #4776E6 0%, #8E54E9 100%)",border:"none",color:"#fff",padding:"6px 10px",borderRadius:6,cursor:"pointer",fontWeight:"bold"},children:"+"}),Object(c.jsx)("button",{onClick:()=>k(e=>Object(l.a)(Object(l.a)({},e),{},{scale:Math.max(.1,e.scale/1.2)})),style:{background:"linear-gradient(135deg, #4776E6 0%, #8E54E9 100%)",border:"none",color:"#fff",padding:"6px 10px",borderRadius:6,cursor:"pointer",fontWeight:"bold"},children:"-"}),Object(c.jsx)("button",{onClick:B,style:{background:"rgba(255, 255, 255, 0.1)",border:"none",color:"#fff",padding:"6px 10px",borderRadius:6,cursor:"pointer",fontSize:10},children:"Reset"}),Object(c.jsxs)("div",{style:{color:"#fff",fontSize:10,textAlign:"center",padding:"4px 0",background:"rgba(255, 255, 255, 0.1)",borderRadius:6},children:[Math.round(100*w.scale),"%"]})]}),Object(c.jsxs)("div",{style:{position:"absolute",bottom:10,left:10,color:"#b0b8c4",fontSize:11,background:"linear-gradient(135deg, rgba(30, 30, 45, 0.8) 0%, rgba(40, 40, 60, 0.8) 100%)",padding:"8px 12px",borderRadius:8,zIndex:200,backdropFilter:"blur(5px)",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.2)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:["Scroll to zoom \u2022 Ctrl+Click or Middle-click to pan",Object(c.jsx)("br",{}),"Click red dot then green dot to connect nodes"]}),Object(c.jsx)("div",{ref:T,style:{transform:"translate(".concat(w.x,"px, ").concat(w.y,"px) scale(").concat(w.scale,")"),transformOrigin:"0 0",position:"absolute",width:"100%",height:"100%",zIndex:10,pointerEvents:"auto",backgroundImage:"\n                        linear-gradient(rgba(255, 255, 255, 0.02) 1px, transparent 1px),\n                        linear-gradient(90deg, rgba(255, 255, 255, 0.02) 1px, transparent 1px)\n                    ",backgroundSize:"20px 20px",backgroundPosition:"0 0"},children:n.map(e=>{const t=s[e.type];if(!t)return null;const r=h===e.id,o=f.from===e.id,i=v===e.id,d=e=>({InputLayer:"linear-gradient(135deg, #36d1dc 0%, #5b86e5 100%)",Conv2DLayer:"linear-gradient(135deg, #ff6a00 0%, #ee0979 100%)",OutputLayer:"linear-gradient(135deg, #00c6ff 0%, #0072ff 100%)",ConcatLayer:"linear-gradient(135deg, #834d9b 0%, #d04ed6 100%)",LinearLayer:"linear-gradient(135deg, #4776E6 0%, #8E54E9 100%)",FlattenLayer:"linear-gradient(135deg, #fc4a1a 0%, #f7b733 100%)",MaxPoolLayer:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)"}[e]||"linear-gradient(135deg, #333 0%, #555 100%)"),p=Object.keys(e.parameters).filter(e=>!["activation","activationFunction"].includes(e)).map(t=>{const n=e.parameters[t],r=Array.isArray(n)?n.join(", "):String(n);return Object(c.jsxs)("div",{style:{marginBottom:8},children:[Object(c.jsxs)("label",{style:{fontSize:12,color:"#b0b8c4",fontWeight:500},children:[t,": "]}),Object(c.jsx)("input",{style:{fontSize:12,width:90,backgroundColor:"rgba(255, 255, 255, 0.07)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"#ffffff",padding:"4px 8px",borderRadius:"6px",outline:"none"},value:r,onChange:n=>((e,t,n)=>{a(r=>r.map(r=>{if(r.id===e){let e=n;if(isNaN(Number(n))||""===n.trim()||(e=Number(n)),t.includes("Shape")&&"string"===typeof n)try{e=n.split(",").map(e=>Number(e.trim())).filter(e=>!isNaN(e))}catch(o){e=n}return Object(l.a)(Object(l.a)({},r),{},{parameters:Object(l.a)(Object(l.a)({},r.parameters),{},{[t]:e})})}return r}))})(e.id,t,n.target.value),placeholder:t.includes("Shape")?"e.g. 28, 28, 1":"",onMouseDown:e=>e.stopPropagation(),onFocus:e=>e.stopPropagation()})]},t)});return Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{style:{position:"absolute",left:e.x-8,top:e.y+42,width:16,height:16,background:i?"linear-gradient(135deg, #00b09b 0%, #96c93d 100%)":"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",borderRadius:"50%",border:"2px solid #ffffff",cursor:"pointer",zIndex:100,boxShadow:i?"0 0 12px rgba(0, 176, 155, 0.8)":"0 2px 8px rgba(0, 0, 0, 0.3)",transform:i?"scale(1.2)":"scale(1)",transition:"all 0.2s ease",pointerEvents:"auto"},onMouseDown:t=>{console.log("Input handle mouse down"),A(e.id,"input",t)},onMouseUp:t=>{console.log("Input handle mouse up"),P(e.id,"input",t)},onClick:e=>{console.log("Input handle clicked"),e.preventDefault(),e.stopPropagation()},title:"Input - Click to connect from another node's output"}),Object(c.jsxs)("div",{"data-layer-id":e.id,style:{position:"absolute",left:e.x,top:e.y,background:o?"linear-gradient(135deg, #0f0f15 0%, #2c3e50 100%)":r?"linear-gradient(135deg, #24243e 0%, #302b63 100%)":"linear-gradient(135deg, #1e1e2d 0%, #2a2a38 100%)",border:o?"2px solid ".concat(d(e.type)):r?"2px solid #ff6b6b":"1px solid rgba(255, 255, 255, 0.1)",borderRadius:12,padding:16,minWidth:120,cursor:null!==f.from?"crosshair":L?"grabbing":"move",zIndex:b===e.id?80:30,color:"#ffffff",boxShadow:r?"0 0 20px rgba(255, 107, 107, 0.3)":"0 4px 20px rgba(0, 0, 0, 0.2)",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",pointerEvents:"auto",backdropFilter:"blur(5px)"},onMouseDown:t=>((e,t)=>{const r=t.target;if(r instanceof HTMLInputElement||r instanceof HTMLLabelElement||r instanceof HTMLSelectElement)return;if(null!==f.from||L)return;if(y(e),!R.current)return;const o=n.find(t=>t.id===e);if(!o)return;const a=R.current.getBoundingClientRect(),i=t.clientX-a.left,l=t.clientY-a.top,c=F(i,l),s=c.x-o.x,d=c.y-o.y;x(e),g({x:s,y:d}),t.stopPropagation()})(e.id,t),children:[Object(c.jsx)("div",{style:{height:"4px",background:d(e.type),borderRadius:"10px",marginBottom:"10px",opacity:.8}}),Object(c.jsx)(t,Object(l.a)({},e.parameters)),Object(c.jsx)("div",{style:{marginTop:12,userSelect:"none"},children:p})]}),Object(c.jsx)("div",{style:{position:"absolute",left:e.x+(e.width||270)+8,top:e.y+42,width:16,height:16,background:"linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%)",borderRadius:"50%",border:"2px solid #ffffff",cursor:"pointer",zIndex:100,boxShadow:f.from===e.id?"0 0 12px rgba(255, 65, 108, 0.8)":"0 2px 8px rgba(0, 0, 0, 0.3)",transform:f.from===e.id?"scale(1.2)":"scale(1)",transition:"all 0.2s ease",pointerEvents:"auto"},onMouseDown:t=>{console.log("Output handle mouse down"),A(e.id,"output",t)},onMouseUp:t=>{console.log("Output handle mouse up"),P(e.id,"output",t)},onClick:e=>{console.log("Output handle clicked"),e.preventDefault(),e.stopPropagation()},title:"Output - Click and drag to connect to another node's output"})]},e.id)})}),(()=>{const e=i.map((e,t)=>{const r=n.find(t=>t.id===e.from),o=n.find(t=>t.id===e.to);if(!r||!o)return null;const a=H(r,"output"),i=H(o,"input"),l=N(a.x,a.y),s=N(i.x,i.y);return Object(c.jsx)("line",{x1:l.x,y1:l.y,x2:s.x,y2:s.y,stroke:"#007acc",strokeWidth:2,markerEnd:"url(#arrowhead)"},"connection-".concat(t))}),t=m&&Object(c.jsx)("line",{x1:m.from.x,y1:m.from.y,x2:m.to.x,y2:m.to.y,stroke:v?"#4caf50":"#ffa726",strokeWidth:2,strokeDasharray:"5,5",markerEnd:"url(#previewArrowhead)"},"preview");return Object(c.jsxs)("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:15},children:[Object(c.jsxs)("defs",{children:[Object(c.jsx)("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:Object(c.jsx)("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#007acc"})}),Object(c.jsx)("marker",{id:"previewArrowhead",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:Object(c.jsx)("polygon",{points:"0 0, 10 3.5, 0 7",fill:v?"#4caf50":"#ffa726"})})]}),e,t]})})()]})});var b=()=>{const e=Object(r.useRef)(null);return Object(r.useEffect)(()=>{const t=e.current;if(!t)return;if(t.querySelector('script[src*="pl27691637.revenuecpmgate.com/f38a87df06df03f6f6d712c37c70cdc1/invoke.js"]'))return;const n=document.createElement("script");return n.async=!0,n.setAttribute("data-cfasync","false"),n.src="//pl27691637.revenuecpmgate.com/f38a87df06df03f6f6d712c37c70cdc1/invoke.js",t.appendChild(n),()=>{t.innerHTML=""}},[]),Object(c.jsxs)("div",{style:{width:"250px",background:"linear-gradient(135deg, #0f0f15 0%, #151520 100%)",padding:"16px",borderRight:"1px solid rgba(255, 255, 255, 0.1)",height:"calc(100vh - 80px)",overflowY:"auto",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.2)"},children:[Object(c.jsx)("h3",{style:{color:"#ffffff",marginTop:0,marginBottom:"16px",fontSize:"18px",fontWeight:600,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",paddingBottom:"10px",letterSpacing:"0.5px"},children:"Layer Library"}),Object(c.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[{type:"InputLayer",name:"Input Layer",icon:"\u25fb",color:"linear-gradient(135deg, #36d1dc 0%, #5b86e5 100%)"},{type:"Conv2DLayer",name:"Conv2D Layer",icon:"\u2b1a",color:"linear-gradient(135deg, #ff6a00 0%, #ee0979 100%)"},{type:"MaxPoolLayer",name:"MaxPool Layer",icon:"\u25e9",color:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)"},{type:"FlattenLayer",name:"Flatten Layer",icon:"\u229f",color:"linear-gradient(135deg, #fc4a1a 0%, #f7b733 100%)"},{type:"LinearLayer",name:"Linear Layer",icon:"\u2194",color:"linear-gradient(135deg, #4776E6 0%, #8E54E9 100%)"},{type:"OutputLayer",name:"Output Layer",icon:"\u25c8",color:"linear-gradient(135deg, #00c6ff 0%, #0072ff 100%)"},{type:"ConcatLayer",name:"Concat Layer",icon:"\u2295",color:"linear-gradient(135deg, #834d9b 0%, #d04ed6 100%)"}].map(e=>Object(c.jsxs)("div",{draggable:!0,onDragStart:t=>((e,t)=>{const n={type:t,id:Date.now()+Math.random()};e.dataTransfer.setData("text/plain",JSON.stringify(n))})(t,e.type),style:{padding:"12px",background:"#1e1e2d",borderRadius:"10px",cursor:"grab",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"12px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",position:"relative",overflow:"hidden"},onMouseDown:e=>e.currentTarget.style.cursor="grabbing",onMouseUp:e=>e.currentTarget.style.cursor="grab",onMouseOver:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 15px rgba(0, 0, 0, 0.2)"},onMouseOut:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 2px 10px rgba(0, 0, 0, 0.1)"},children:[Object(c.jsx)("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:"5px",background:e.color,borderTopLeftRadius:"10px",borderBottomLeftRadius:"10px"}}),Object(c.jsx)("div",{style:{width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",fontSize:"20px",marginLeft:"5px"},children:e.icon}),Object(c.jsx)("span",{style:{color:"#ffffff",fontWeight:"500",fontSize:"14px"},children:e.name})]},e.type))}),Object(c.jsxs)("div",{style:{marginTop:"16px",padding:"12px",background:"rgba(255, 255, 255, 0.02)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[Object(c.jsx)("div",{style:{fontSize:"11px",color:"#8a9db8",marginBottom:"8px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Sponsored"}),Object(c.jsx)("div",{ref:e,children:Object(c.jsx)("div",{id:"container-f38a87df06df03f6f6d712c37c70cdc1",style:{minHeight:250,background:"rgba(255, 255, 255, 0.05)",borderRadius:6}})})]})]})};var x=e=>{let{trainingOptions:t,onOptionChange:n}=e;const o=Object(r.useRef)(null);return Object(r.useEffect)(()=>{const e=o.current;if(!e)return;e.innerHTML="";const t=document.createElement("script");t.type="text/javascript",t.text="\n            atOptions = {\n                'key' : 'a4a25afffd74b77d668b2be8c7cf8d59',\n                'format' : 'iframe',\n                'height' : 300,\n                'width' : 160,\n                'params' : {}\n            };\n        ";const n=document.createElement("script");return n.type="text/javascript",n.src="//www.highperformanceformat.com/a4a25afffd74b77d668b2be8c7cf8d59/invoke.js",n.async=!0,e.appendChild(t),e.appendChild(n),()=>{e.innerHTML=""}},[]),Object(c.jsxs)("div",{style:{width:200,borderLeft:"1px solid rgba(255, 255, 255, 0.1)",padding:16,background:"linear-gradient(135deg, #0f0f15 0%, #151520 100%)",color:"#ffffff",height:"calc(100vh - 80px)",overflowY:"auto",boxShadow:"-2px 0 15px rgba(0, 0, 0, 0.2)"},children:[Object(c.jsx)("h3",{style:{color:"#ffffff",marginTop:0,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",paddingBottom:"10px",fontWeight:600,letterSpacing:"0.5px"},children:"Training Options"}),Object(c.jsxs)("div",{style:{marginTop:"12px",display:"flex",flexDirection:"column",gap:"16px"},children:[Object(c.jsxs)("div",{className:"training-option",children:[Object(c.jsx)("label",{style:{display:"block",marginBottom:"6px",color:"#b0b8c4",fontSize:"14px",fontWeight:500},children:"Batch Size"}),Object(c.jsx)("input",{type:"number",value:t.batchSize,onChange:e=>n("batchSize",Number(e.target.value)),style:{width:"100%",padding:"8px 10px",background:"rgba(255, 255, 255, 0.07)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",color:"white",fontSize:"14px",outline:"none",boxSizing:"border-box"}})]}),Object(c.jsxs)("div",{className:"training-option",children:[Object(c.jsx)("label",{style:{display:"block",marginBottom:"6px",color:"#b0b8c4",fontSize:"14px",fontWeight:500},children:"Epochs"}),Object(c.jsx)("input",{type:"number",value:t.epochs,onChange:e=>n("epochs",Number(e.target.value)),style:{width:"100%",padding:"8px 10px",background:"rgba(255, 255, 255, 0.07)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",color:"white",fontSize:"14px",outline:"none",boxSizing:"border-box"}})]}),Object(c.jsxs)("div",{className:"training-option",children:[Object(c.jsx)("label",{style:{display:"block",marginBottom:"6px",color:"#b0b8c4",fontSize:"14px",fontWeight:500},children:"Learning Rate"}),Object(c.jsx)("input",{type:"number",step:"0.0001",value:t.learningRate,onChange:e=>n("learningRate",Number(e.target.value)),style:{width:"100%",padding:"8px 10px",background:"rgba(255, 255, 255, 0.07)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",color:"white",fontSize:"14px",outline:"none",boxSizing:"border-box"}})]}),Object(c.jsxs)("div",{className:"training-option",children:[Object(c.jsx)("label",{style:{display:"block",marginBottom:"6px",color:"#b0b8c4",fontSize:"14px",fontWeight:500},children:"Optimizer"}),Object(c.jsxs)("select",{value:t.optimizer,onChange:e=>n("optimizer",e.target.value),style:{width:"100%",padding:"8px 10px",background:"rgba(255, 255, 255, 0.07)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",color:"white",fontSize:"14px",outline:"none"},children:[Object(c.jsx)("option",{value:"adam",children:"Adam"}),Object(c.jsx)("option",{value:"sgd",children:"SGD"}),Object(c.jsx)("option",{value:"rmsprop",children:"RMSprop"})]})]}),Object(c.jsxs)("div",{className:"training-option",children:[Object(c.jsx)("label",{style:{display:"block",marginBottom:"6px",color:"#b0b8c4",fontSize:"14px",fontWeight:500},children:"Loss Function"}),Object(c.jsxs)("select",{value:t.lossFunction,onChange:e=>n("lossFunction",e.target.value),style:{width:"100%",padding:"8px 10px",background:"rgba(255, 255, 255, 0.07)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",color:"white",fontSize:"14px",outline:"none"},children:[Object(c.jsx)("option",{value:"mse",children:"Mean Squared Error"}),Object(c.jsx)("option",{value:"crossentropy",children:"Cross Entropy"})]})]}),Object(c.jsxs)("div",{style:{marginTop:"20px",padding:"12px",background:"rgba(255, 255, 255, 0.02)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.05)",textAlign:"center"},children:[Object(c.jsx)("div",{style:{fontSize:"11px",color:"#8a9db8",marginBottom:"8px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Sponsored"}),Object(c.jsx)("div",{ref:o,style:{minHeight:"300px",display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px"}})]})]})]})};var u=e=>{let{onExport:t,onImport:n}=e;return Object(c.jsxs)("div",{className:"toolbar",style:{display:"flex",justifyContent:"space-between",padding:"12px 20px",background:"linear-gradient(90deg, #0f0f15 0%, #151520 100%)",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 2px 10px rgba(0,0,0,0.2)"},children:[Object(c.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[Object(c.jsx)("h2",{style:{margin:0,fontSize:"22px",color:"#fff",fontWeight:700,letterSpacing:"0.5px",background:"linear-gradient(to right, #36d1dc, #5b86e5)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Autai"}),Object(c.jsxs)("div",{style:{display:"flex",flexDirection:"column",color:"#8a9db8",fontSize:"12px",borderLeft:"1px solid rgba(255, 255, 255, 0.2)",paddingLeft:"15px",lineHeight:"1.4"},children:[Object(c.jsx)("span",{children:"By Fadhil"}),Object(c.jsx)("span",{style:{fontStyle:"italic"},children:"-Feaven Technologies-"})]})]}),Object(c.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[Object(c.jsx)("button",{onClick:n,style:{background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",border:"none",padding:"8px 16px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontWeight:"600",boxShadow:"0 2px 10px rgba(17, 153, 142, 0.3)",transition:"all 0.3s ease"},onMouseOver:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 15px rgba(17, 153, 142, 0.4)"},onMouseOut:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 2px 10px rgba(17, 153, 142, 0.3)"},children:Object(c.jsx)("span",{children:"Import Model"})}),Object(c.jsx)("button",{onClick:t,style:{background:"linear-gradient(135deg, #4776E6 0%, #8E54E9 100%)",color:"white",border:"none",padding:"8px 16px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontWeight:"600",boxShadow:"0 2px 10px rgba(71, 118, 230, 0.3)",transition:"all 0.3s ease"},onMouseOver:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 15px rgba(71, 118, 230, 0.4)"},onMouseOut:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 2px 10px rgba(71, 118, 230, 0.3)"},children:Object(c.jsx)("span",{children:"Export Model"})})]})]})};var g=()=>{const[e,t]=Object(r.useState)({isExporting:!1,message:"",isError:!1}),[n,o]=Object(r.useState)({batchSize:32,epochs:10,learningRate:.001,optimizer:"adam",lossFunction:"mse"}),a=Object(r.useRef)(null);return Object(c.jsxs)("div",{className:"app",style:{height:"100vh",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #0f0f15 0%, #151520 100%)",color:"#ffffff"},children:[Object(c.jsx)(u,{onExport:async()=>{if(a.current)try{t({isExporting:!0,message:"Exporting model...",isError:!1});const r=a.current.getModelData(),o=Object(l.a)(Object(l.a)({},r),{},{trainingOptions:n}),i="undefined"!==typeof window&&"https:"===window.location.protocol,c=document.querySelector('meta[name="autai:api-base"]'),s=(c&&(c.getAttribute("content")||"").trim(),"https://api.feaven.tech".replace(/\/+$/,"")),d=("undefined"!==typeof window?window.location.origin:"").replace(/\/+$/,""),p=["".concat(d,"/api/export-model"),"".concat(d,"/export-model"),s?"".concat(s,"/api/export-model"):"",s?"".concat(s,"/export-model"):"",i?"":"http://localhost:5000/api/export-model"].filter(Boolean),b=new Set,x=p.filter(e=>!b.has(e)&&(b.add(e),!0));let u=null,g=null;for(const t of x)try{const e=new AbortController,n=setTimeout(()=>e.abort(),5e3),r=await fetch(t,{method:"POST",mode:"cors",cache:"no-store",headers:{"Content-Type":"application/json"},body:JSON.stringify(o),signal:e.signal});clearTimeout(n);const a=(r.headers.get("content-type")||"").includes("application/json"),i=a?await r.json():await r.text();if(!r.ok){const e="string"===typeof i?i.slice(0,200):JSON.stringify(i);throw new Error("HTTP ".concat(r.status," from ").concat(t," - ").concat(e))}if(!a)throw new Error("Non-JSON response from ".concat(t,": ").concat(String(i).slice(0,120)));u=i;break}catch(e){g=e instanceof Error&&"AbortError"===e.name?new Error("Request to ".concat(t," timed out")):e;continue}if(!u)throw g||new Error("Export failed: no valid response from any endpoint");if(!u.success)throw new Error(u.message||"Export failed");const f=new Blob([u.message],{type:"text/plain"}),j=URL.createObjectURL(f),h=document.createElement("a");h.href=j,h.download="autai_model.py",document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(j),t({isExporting:!1,message:"Export successful! File downloaded.",isError:!1}),setTimeout(()=>{t(e=>Object(l.a)(Object(l.a)({},e),{},{message:""}))},3e3)}catch(r){console.error("Export failed:",r),t({isExporting:!1,message:"Export failed: ".concat(r instanceof Error?r.message:"Unknown error"),isError:!0})}else t({isExporting:!1,message:"Canvas reference not available",isError:!0})}}),e.message&&Object(c.jsx)("div",{style:{padding:"10px 16px",background:e.isError?"linear-gradient(90deg, #ff416c 0%, #ff4b2b 100%)":"linear-gradient(90deg, #00b09b 0%, #96c93d 100%)",color:"white",textAlign:"center",opacity:e.message?1:0,transition:"opacity 0.3s",fontWeight:"500",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.15)"},children:e.message}),Object(c.jsxs)("div",{className:"main-container",style:{flex:1,display:"flex",overflow:"hidden",height:"calc(100vh - 80px)"},children:[Object(c.jsx)(b,{}),Object(c.jsx)("div",{style:{flex:1,position:"relative",overflow:"hidden",height:"100%"},children:Object(c.jsx)(p,{ref:a})}),Object(c.jsx)(x,{trainingOptions:n,onOptionChange:(e,t)=>{o(n=>Object(l.a)(Object(l.a)({},n),{},{[e]:t}))}})]})]})};i.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(g,{})}),document.getElementById("root"))},9:function(e,t,n){}},[[12,1,2]]]);
//# sourceMappingURL=main.568aa4b8.chunk.js.map