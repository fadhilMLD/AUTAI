{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Fadhi\\\\Downloads\\\\Essentials\\\\ai_maker\\\\dragflow-nn-builder\\\\src\\\\components\\\\canvas\\\\Canvas.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport DropZone from './DropZone';\nimport InputLayer from '../layers/InputLayer';\nimport Conv2DLayer from '../layers/Conv2DLayer';\nimport OutputLayer from '../layers/OutputLayer';\nimport ConcatLayer from '../layers/ConcatLayer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst layerComponentMap = {\n  InputLayer: InputLayer,\n  Conv2DLayer: Conv2DLayer,\n  OutputLayer: OutputLayer,\n  ConcatLayer: ConcatLayer\n};\nconst defaultParams = {\n  InputLayer: {\n    inputShape: [28, 28, 1]\n  },\n  Conv2DLayer: {\n    filterSize: 3,\n    numFilters: 32,\n    activationFunction: 'relu'\n  },\n  OutputLayer: {\n    outputShape: [10],\n    activationFunction: 'softmax'\n  },\n  ConcatLayer: {\n    layers: []\n  }\n};\nconst Canvas = () => {\n  _s();\n  const [layers, setLayers] = useState([]);\n  const [connections, setConnections] = useState([]);\n  const [draggedId, setDraggedId] = useState(null);\n  const [dragOffset, setDragOffset] = useState({\n    x: 0,\n    y: 0\n  });\n  const [connecting, setConnecting] = useState({\n    from: null,\n    to: null\n  });\n  const [selectedLayerId, setSelectedLayerId] = useState(null);\n  const [connectionPreview, setConnectionPreview] = useState(null);\n  const [nearbyHandle, setNearbyHandle] = useState(null);\n  const canvasRef = useRef(null);\n\n  // Keyboard event handler for deleting selected nodes\n  useEffect(() => {\n    const handleKeyDown = e => {\n      // Don't delete if user is typing in an input field\n      const activeElement = document.activeElement;\n      if (activeElement instanceof HTMLInputElement || activeElement instanceof HTMLTextAreaElement || activeElement instanceof HTMLSelectElement) {\n        return;\n      }\n      if ((e.key === 'Delete' || e.key === 'Backspace') && selectedLayerId !== null) {\n        // Remove the selected layer\n        setLayers(prev => prev.filter(l => l.id !== selectedLayerId));\n        // Remove all connections involving this layer\n        setConnections(prev => prev.filter(conn => conn.from !== selectedLayerId && conn.to !== selectedLayerId));\n        setSelectedLayerId(null);\n        e.preventDefault();\n      }\n    };\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [selectedLayerId]);\n\n  // Add new layer at the mouse drop position\n  const handleDrop = layer => {\n    // Only allow valid LayerType\n    if (!['InputLayer', 'Conv2DLayer', 'OutputLayer', 'ConcatLayer'].includes(layer.type)) {\n      return;\n    }\n    const validLayerTypes = ['InputLayer', 'Conv2DLayer', 'OutputLayer', 'ConcatLayer'];\n    const type = validLayerTypes.find(t => t === layer.type);\n    if (!type) {\n      return;\n    }\n    setLayers(prev => {\n      var _layer$x, _layer$y;\n      return [...prev, {\n        ...layer,\n        type: type,\n        parameters: {\n          ...defaultParams[type]\n        },\n        x: (_layer$x = layer.x) !== null && _layer$x !== void 0 ? _layer$x : 100,\n        y: (_layer$y = layer.y) !== null && _layer$y !== void 0 ? _layer$y : 100\n      }];\n    });\n  };\n\n  // Improved drag logic with input element detection and selection\n  const handleMouseDown = (id, e) => {\n    // Prevent dragging if clicking on input elements, labels, or select elements\n    const target = e.target;\n    if (target instanceof HTMLInputElement || target instanceof HTMLLabelElement || target instanceof HTMLSelectElement) {\n      return;\n    }\n\n    // Don't start dragging if we're connecting\n    if (connecting.from !== null) {\n      return;\n    }\n\n    // Set selected layer\n    setSelectedLayerId(id);\n    if (!canvasRef.current) return;\n    const layer = layers.find(l => l.id === id);\n    if (!layer) return;\n    const rect = canvasRef.current.getBoundingClientRect();\n    const mouseX = e.clientX - rect.left;\n    const mouseY = e.clientY - rect.top;\n\n    // Calculate offset from mouse position to layer's top-left corner\n    const offsetX = mouseX - layer.x;\n    const offsetY = mouseY - layer.y;\n    setDraggedId(id);\n    setDragOffset({\n      x: offsetX,\n      y: offsetY\n    });\n    e.stopPropagation();\n  };\n\n  // Click outside to deselect\n  const handleCanvasClick = e => {\n    if (e.target === canvasRef.current) {\n      setSelectedLayerId(null);\n    }\n  };\n  const handleMouseUp = () => {\n    setDraggedId(null);\n    setDragOffset({\n      x: 0,\n      y: 0\n    });\n\n    // End connection if we're connecting\n    if (connecting.from !== null) {\n      setConnecting({\n        from: null,\n        to: null\n      });\n      setConnectionPreview(null);\n      setNearbyHandle(null);\n    }\n  };\n  const handleMouseMove = e => {\n    if (!canvasRef.current) return;\n    const rect = canvasRef.current.getBoundingClientRect();\n    const mouseX = e.clientX - rect.left;\n    const mouseY = e.clientY - rect.top;\n\n    // Handle node dragging\n    if (draggedId !== null) {\n      const x = mouseX - dragOffset.x;\n      const y = mouseY - dragOffset.y;\n      setLayers(prev => prev.map(l => l.id === draggedId ? {\n        ...l,\n        x,\n        y\n      } : l));\n    }\n\n    // Handle connection preview\n    if (connecting.from !== null) {\n      const fromLayer = layers.find(l => l.id === connecting.from);\n      if (fromLayer) {\n        const fromPos = getHandlePosition(fromLayer, 'output');\n\n        // Check for nearby input handles\n        let closestHandle = null;\n        let minDistance = 30; // Snap distance\n\n        layers.forEach(layer => {\n          if (layer.id !== connecting.from) {\n            const inputPos = getHandlePosition(layer, 'input');\n            const distance = Math.sqrt(Math.pow(mouseX - inputPos.x, 2) + Math.pow(mouseY - inputPos.y, 2));\n            if (distance < minDistance) {\n              minDistance = distance;\n              closestHandle = layer.id;\n            }\n          }\n        });\n        setNearbyHandle(closestHandle);\n\n        // Set preview line\n        if (closestHandle) {\n          const targetLayer = layers.find(l => l.id === closestHandle);\n          if (targetLayer) {\n            const targetPos = getHandlePosition(targetLayer, 'input');\n            setConnectionPreview({\n              from: fromPos,\n              to: targetPos\n            });\n          }\n        } else {\n          setConnectionPreview({\n            from: fromPos,\n            to: {\n              x: mouseX,\n              y: mouseY\n            }\n          });\n        }\n      }\n    }\n  };\n\n  // Inline parameter editing with proper type conversion\n  const handleParamChange = (id, param, value) => {\n    setLayers(prev => prev.map(l => {\n      if (l.id === id) {\n        let convertedValue = value;\n\n        // Convert numeric strings to numbers\n        if (!isNaN(Number(value)) && value.trim() !== '') {\n          convertedValue = Number(value);\n        }\n\n        // Handle array inputs (for inputShape, outputShape)\n        if (param.includes('Shape') && typeof value === 'string') {\n          try {\n            // Parse comma-separated values as array\n            convertedValue = value.split(',').map(v => Number(v.trim())).filter(v => !isNaN(v));\n          } catch {\n            convertedValue = value;\n          }\n        }\n        return {\n          ...l,\n          parameters: {\n            ...l.parameters,\n            [param]: convertedValue\n          }\n        };\n      }\n      return l;\n    }));\n  };\n\n  // Connection logic with handles\n  const handleConnectionStart = (id, type, e) => {\n    e.stopPropagation();\n    if (type === 'output') {\n      setConnecting({\n        from: id,\n        to: null\n      });\n    }\n  };\n  const handleConnectionEnd = (id, type, e) => {\n    e.stopPropagation();\n    if (type === 'input' && connecting.from !== null && connecting.from !== id) {\n      // Check if connection already exists\n      const existingConnectionIndex = connections.findIndex(conn => conn.from === connecting.from && conn.to === id);\n      if (existingConnectionIndex !== -1) {\n        // Disconnect if connection exists\n        setConnections(prev => prev.filter((_, index) => index !== existingConnectionIndex));\n      } else {\n        // Connect if no connection exists\n        const fromId = connecting.from;\n        setConnections(prev => [...prev, {\n          from: fromId,\n          to: id\n        }]);\n      }\n      setConnecting({\n        from: null,\n        to: null\n      });\n      setConnectionPreview(null);\n      setNearbyHandle(null);\n    }\n  };\n\n  // Function to update node width after render - optimized to prevent infinite loops\n  const updateNodeWidth = useCallback((layerId, element) => {\n    if (element) {\n      const currentWidth = element.offsetWidth;\n\n      // Only update if width has actually changed\n      setLayers(prev => {\n        const existingLayer = prev.find(layer => layer.id === layerId);\n        if (existingLayer && existingLayer.width !== currentWidth) {\n          return prev.map(layer => layer.id === layerId ? {\n            ...layer,\n            width: currentWidth\n          } : layer);\n        }\n        return prev;\n      });\n    }\n  }, []);\n\n  // Use useEffect to measure width after initial render instead of ref callback\n  useEffect(() => {\n    layers.forEach(layer => {\n      if (!layer.width) {\n        const element = document.querySelector(`[data-layer-id=\"${layer.id}\"]`);\n        if (element) {\n          const width = element.offsetWidth;\n          setLayers(prev => prev.map(l => l.id === layer.id ? {\n            ...l,\n            width\n          } : l));\n        }\n      }\n    });\n  }, [layers.length]); // Only run when number of layers changes\n\n  // Helper function to get handle positions - using actual width\n  const getHandlePosition = (layer, type) => {\n    if (type === 'input') {\n      return {\n        x: layer.x - 8,\n        y: layer.y + 50\n      };\n    } else {\n      // Use the actual measured width, fallback to estimated width\n      const nodeWidth = layer.width || 270;\n      return {\n        x: layer.x + nodeWidth + 8,\n        y: layer.y + 50\n      };\n    }\n  };\n\n  // Update connection line positions to connect handles\n  const getLayerCenter = layer => {\n    return {\n      x: layer.x + 60,\n      y: layer.y + 50\n    };\n  };\n\n  // Updated render connections to include preview\n  const renderConnections = () => {\n    const connectionLines = connections.map((connection, index) => {\n      const fromLayer = layers.find(l => l.id === connection.from);\n      const toLayer = layers.find(l => l.id === connection.to);\n      if (!fromLayer || !toLayer) return null;\n      const from = getHandlePosition(fromLayer, 'output');\n      const to = getHandlePosition(toLayer, 'input');\n      return /*#__PURE__*/_jsxDEV(\"line\", {\n        x1: from.x,\n        y1: from.y,\n        x2: to.x,\n        y2: to.y,\n        stroke: \"#007acc\",\n        strokeWidth: \"2\",\n        markerEnd: \"url(#arrowhead)\"\n      }, `connection-${index}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 17\n      }, this);\n    });\n\n    // Add preview connection\n    const previewLine = connectionPreview && /*#__PURE__*/_jsxDEV(\"line\", {\n      x1: connectionPreview.from.x,\n      y1: connectionPreview.from.y,\n      x2: connectionPreview.to.x,\n      y2: connectionPreview.to.y,\n      stroke: nearbyHandle ? \"#4caf50\" : \"#ffa726\",\n      strokeWidth: \"2\",\n      strokeDasharray: \"5,5\",\n      markerEnd: \"url(#previewArrowhead)\"\n    }, \"preview\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 13\n    }, this);\n    return /*#__PURE__*/_jsxDEV(\"svg\", {\n      style: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: '100%',\n        height: '100%',\n        pointerEvents: 'none',\n        zIndex: 0\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"defs\", {\n        children: [/*#__PURE__*/_jsxDEV(\"marker\", {\n          id: \"arrowhead\",\n          markerWidth: \"10\",\n          markerHeight: \"7\",\n          refX: \"9\",\n          refY: \"3.5\",\n          orient: \"auto\",\n          children: /*#__PURE__*/_jsxDEV(\"polygon\", {\n            points: \"0 0, 10 3.5, 0 7\",\n            fill: \"#007acc\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"marker\", {\n          id: \"previewArrowhead\",\n          markerWidth: \"10\",\n          markerHeight: \"7\",\n          refX: \"9\",\n          refY: \"3.5\",\n          orient: \"auto\",\n          children: /*#__PURE__*/_jsxDEV(\"polygon\", {\n            points: \"0 0, 10 3.5, 0 7\",\n            fill: nearbyHandle ? \"#4caf50\" : \"#ffa726\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 17\n      }, this), connectionLines, previewLine]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 13\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"canvas\",\n    ref: canvasRef,\n    style: {\n      minHeight: 500,\n      border: '1px solid #444',\n      position: 'relative',\n      overflow: 'hidden',\n      backgroundColor: '#1e1e1e'\n    },\n    onMouseMove: handleMouseMove,\n    onMouseUp: handleMouseUp,\n    onClick: handleCanvasClick,\n    tabIndex: 0,\n    children: [/*#__PURE__*/_jsxDEV(DropZone, {\n      onDrop: handleDrop\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 13\n    }, this), renderConnections(), layers.map(layer => {\n      const LayerComponent = layerComponentMap[layer.type];\n      if (!LayerComponent) return null;\n      const isSelected = selectedLayerId === layer.id;\n      const isConnecting = connecting.from === layer.id;\n      const isNearbyTarget = nearbyHandle === layer.id;\n\n      // Inline parameter editing UI for demo\n      const paramInputs = Object.keys(layer.parameters).map(param => {\n        const value = layer.parameters[param];\n        const displayValue = Array.isArray(value) ? value.join(', ') : String(value);\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: 4\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              fontSize: 12,\n              color: '#ccc'\n            },\n            children: [param, \": \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            style: {\n              fontSize: 12,\n              width: 80,\n              backgroundColor: '#3a3a3a',\n              border: '1px solid #555',\n              color: '#ffffff',\n              padding: '2px 4px',\n              borderRadius: '2px'\n            },\n            value: displayValue,\n            onChange: e => handleParamChange(layer.id, param, e.target.value),\n            placeholder: param.includes('Shape') ? \"e.g. 28, 28, 1\" : \"\",\n            onMouseDown: e => e.stopPropagation(),\n            onFocus: e => e.stopPropagation()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 464,\n            columnNumber: 29\n          }, this)]\n        }, param, true, {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 25\n        }, this);\n      });\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            left: layer.x - 8,\n            top: layer.y + 42,\n            width: 16,\n            height: 16,\n            backgroundColor: isNearbyTarget ? '#81c784' : '#4caf50',\n            borderRadius: '50%',\n            border: '2px solid #ffffff',\n            cursor: 'pointer',\n            zIndex: 3,\n            boxShadow: isNearbyTarget ? '0 0 8px rgba(129, 199, 132, 0.8)' : '0 2px 4px rgba(0, 0, 0, 0.3)',\n            transform: isNearbyTarget ? 'scale(1.2)' : 'scale(1)',\n            transition: 'all 0.2s ease'\n          },\n          onMouseDown: e => handleConnectionStart(layer.id, 'input', e),\n          onMouseUp: e => handleConnectionEnd(layer.id, 'input', e),\n          title: \"Input - Click to connect from another node's output\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          \"data-layer-id\": layer.id,\n          style: {\n            position: 'absolute',\n            left: layer.x,\n            top: layer.y,\n            background: isConnecting ? '#1e3a5f' : isSelected ? '#3a3a3a' : '#2d2d2d',\n            border: isConnecting ? '2px solid #007acc' : isSelected ? '2px solid #ff6b6b' : '2px solid #555',\n            borderRadius: 8,\n            padding: 12,\n            minWidth: 120,\n            cursor: connecting.from !== null ? 'crosshair' : 'move',\n            zIndex: draggedId === layer.id ? 2 : 1,\n            color: '#ffffff',\n            boxShadow: isSelected ? '0 0 10px rgba(255, 107, 107, 0.3)' : '0 2px 8px rgba(0, 0, 0, 0.3)',\n            userSelect: 'none',\n            WebkitUserSelect: 'none',\n            MozUserSelect: 'none',\n            msUserSelect: 'none'\n          },\n          onMouseDown: e => handleMouseDown(layer.id, e),\n          children: [/*#__PURE__*/_jsxDEV(LayerComponent, {\n            ...layer.parameters\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 531,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 8,\n              userSelect: 'none'\n            },\n            children: paramInputs\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 532,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            left: layer.x + (layer.width || 270) + 8,\n            top: layer.y + 42,\n            width: 16,\n            height: 16,\n            backgroundColor: '#f44336',\n            borderRadius: '50%',\n            border: '2px solid #ffffff',\n            cursor: 'pointer',\n            zIndex: 3,\n            boxShadow: connecting.from === layer.id ? '0 0 8px rgba(244, 67, 54, 0.8)' : '0 2px 4px rgba(0, 0, 0, 0.3)',\n            transform: connecting.from === layer.id ? 'scale(1.2)' : 'scale(1)',\n            transition: 'all 0.2s ease'\n          },\n          onMouseDown: e => handleConnectionStart(layer.id, 'output', e),\n          onMouseUp: e => handleConnectionEnd(layer.id, 'output', e),\n          title: \"Output - Click and drag to connect to another node's input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 25\n        }, this)]\n      }, layer.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 21\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 427,\n    columnNumber: 9\n  }, this);\n};\n_s(Canvas, \"GP1eqUbM7Rv3O0XADI7Igsc5A4M=\");\n_c = Canvas;\nexport default Canvas;\nvar _c;\n$RefreshReg$(_c, \"Canvas\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","DropZone","InputLayer","Conv2DLayer","OutputLayer","ConcatLayer","jsxDEV","_jsxDEV","layerComponentMap","defaultParams","inputShape","filterSize","numFilters","activationFunction","outputShape","layers","Canvas","_s","setLayers","connections","setConnections","draggedId","setDraggedId","dragOffset","setDragOffset","x","y","connecting","setConnecting","from","to","selectedLayerId","setSelectedLayerId","connectionPreview","setConnectionPreview","nearbyHandle","setNearbyHandle","canvasRef","handleKeyDown","e","activeElement","document","HTMLInputElement","HTMLTextAreaElement","HTMLSelectElement","key","prev","filter","l","id","conn","preventDefault","addEventListener","removeEventListener","handleDrop","layer","includes","type","validLayerTypes","find","t","_layer$x","_layer$y","parameters","handleMouseDown","target","HTMLLabelElement","current","rect","getBoundingClientRect","mouseX","clientX","left","mouseY","clientY","top","offsetX","offsetY","stopPropagation","handleCanvasClick","handleMouseUp","handleMouseMove","map","fromLayer","fromPos","getHandlePosition","closestHandle","minDistance","forEach","inputPos","distance","Math","sqrt","pow","targetLayer","targetPos","handleParamChange","param","value","convertedValue","isNaN","Number","trim","split","v","handleConnectionStart","handleConnectionEnd","existingConnectionIndex","findIndex","_","index","fromId","updateNodeWidth","layerId","element","currentWidth","offsetWidth","existingLayer","width","querySelector","length","nodeWidth","getLayerCenter","renderConnections","connectionLines","connection","toLayer","x1","y1","x2","y2","stroke","strokeWidth","markerEnd","fileName","_jsxFileName","lineNumber","columnNumber","previewLine","strokeDasharray","style","position","height","pointerEvents","zIndex","children","markerWidth","markerHeight","refX","refY","orient","points","fill","className","ref","minHeight","border","overflow","backgroundColor","onMouseMove","onMouseUp","onClick","tabIndex","onDrop","LayerComponent","isSelected","isConnecting","isNearbyTarget","paramInputs","Object","keys","displayValue","Array","isArray","join","String","marginBottom","fontSize","color","padding","borderRadius","onChange","placeholder","onMouseDown","onFocus","cursor","boxShadow","transform","transition","title","background","minWidth","userSelect","WebkitUserSelect","MozUserSelect","msUserSelect","marginTop","_c","$RefreshReg$"],"sources":["C:/Users/Fadhi/Downloads/Essentials/ai_maker/dragflow-nn-builder/src/components/canvas/Canvas.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\nimport DropZone from './DropZone';\nimport InputLayer from '../layers/InputLayer';\nimport Conv2DLayer from '../layers/Conv2DLayer';\nimport OutputLayer from '../layers/OutputLayer';\nimport ConcatLayer from '../layers/ConcatLayer';\n\ntype LayerType = 'InputLayer' | 'Conv2DLayer' | 'OutputLayer' | 'ConcatLayer';\n\ninterface LayerProps {\n    [key: string]: any;\n}\n\nconst layerComponentMap: Record<LayerType, React.ComponentType<LayerProps>> = {\n    InputLayer: InputLayer,\n    Conv2DLayer: Conv2DLayer,\n    OutputLayer: OutputLayer,\n    ConcatLayer: ConcatLayer,\n};\n\nconst defaultParams: Record<LayerType, Record<string, any>> = {\n    InputLayer: { inputShape: [28, 28, 1] },\n    Conv2DLayer: { filterSize: 3, numFilters: 32, activationFunction: 'relu' },\n    OutputLayer: { outputShape: [10], activationFunction: 'softmax' },\n    ConcatLayer: { layers: [] },\n};\n\ninterface DroppedLayer {\n    type: LayerType;\n    id: number;\n    parameters: Record<string, any>;\n    x: number;\n    y: number;\n    selected?: boolean;\n    width?: number; // Add width property\n}\n\ninterface Connection {\n    from: number;\n    to: number;\n}\n\nconst Canvas: React.FC = () => {\n    const [layers, setLayers] = useState<DroppedLayer[]>([]);\n    const [connections, setConnections] = useState<Connection[]>([]);\n    const [draggedId, setDraggedId] = useState<number | null>(null);\n    const [dragOffset, setDragOffset] = useState<{ x: number; y: number }>({ x: 0, y: 0 });\n    const [connecting, setConnecting] = useState<{ from: number | null, to: number | null }>({ from: null, to: null });\n    const [selectedLayerId, setSelectedLayerId] = useState<number | null>(null);\n    const [connectionPreview, setConnectionPreview] = useState<{ from: { x: number; y: number }, to: { x: number; y: number } } | null>(null);\n    const [nearbyHandle, setNearbyHandle] = useState<number | null>(null);\n    const canvasRef = useRef<HTMLDivElement>(null);\n\n    // Keyboard event handler for deleting selected nodes\n    useEffect(() => {\n        const handleKeyDown = (e: KeyboardEvent) => {\n            // Don't delete if user is typing in an input field\n            const activeElement = document.activeElement;\n            if (activeElement instanceof HTMLInputElement || \n                activeElement instanceof HTMLTextAreaElement || \n                activeElement instanceof HTMLSelectElement) {\n                return;\n            }\n\n            if ((e.key === 'Delete' || e.key === 'Backspace') && selectedLayerId !== null) {\n                // Remove the selected layer\n                setLayers(prev => prev.filter(l => l.id !== selectedLayerId));\n                // Remove all connections involving this layer\n                setConnections(prev => prev.filter(\n                    conn => conn.from !== selectedLayerId && conn.to !== selectedLayerId\n                ));\n                setSelectedLayerId(null);\n                e.preventDefault();\n            }\n        };\n\n        document.addEventListener('keydown', handleKeyDown);\n        return () => document.removeEventListener('keydown', handleKeyDown);\n    }, [selectedLayerId]);\n\n    // Add new layer at the mouse drop position\n    const handleDrop = (layer: { type: string; id: number; x?: number; y?: number }) => {\n        // Only allow valid LayerType\n        if (!['InputLayer', 'Conv2DLayer', 'OutputLayer', 'ConcatLayer'].includes(layer.type)) {\n            return;\n        }\n        \n        const validLayerTypes: LayerType[] = ['InputLayer', 'Conv2DLayer', 'OutputLayer', 'ConcatLayer'];\n        const type = validLayerTypes.find(t => t === layer.type);\n        \n        if (!type) {\n            return;\n        }\n        \n        setLayers(prev => [\n            ...prev,\n            {\n                ...layer,\n                type: type,\n                parameters: { ...defaultParams[type] },\n                x: layer.x ?? 100,\n                y: layer.y ?? 100,\n            },\n        ]);\n    };\n\n    // Improved drag logic with input element detection and selection\n    const handleMouseDown = (id: number, e: React.MouseEvent) => {\n        // Prevent dragging if clicking on input elements, labels, or select elements\n        const target = e.target;\n        if (target instanceof HTMLInputElement || \n            target instanceof HTMLLabelElement || \n            target instanceof HTMLSelectElement) {\n            return;\n        }\n\n        // Don't start dragging if we're connecting\n        if (connecting.from !== null) {\n            return;\n        }\n\n        // Set selected layer\n        setSelectedLayerId(id);\n\n        if (!canvasRef.current) return;\n        \n        const layer = layers.find(l => l.id === id);\n        if (!layer) return;\n        \n        const rect = canvasRef.current.getBoundingClientRect();\n        const mouseX = e.clientX - rect.left;\n        const mouseY = e.clientY - rect.top;\n        \n        // Calculate offset from mouse position to layer's top-left corner\n        const offsetX = mouseX - layer.x;\n        const offsetY = mouseY - layer.y;\n        \n        setDraggedId(id);\n        setDragOffset({ x: offsetX, y: offsetY });\n        e.stopPropagation();\n    };\n\n    // Click outside to deselect\n    const handleCanvasClick = (e: React.MouseEvent) => {\n        if (e.target === canvasRef.current) {\n            setSelectedLayerId(null);\n        }\n    };\n\n    const handleMouseUp = () => {\n        setDraggedId(null);\n        setDragOffset({ x: 0, y: 0 });\n        \n        // End connection if we're connecting\n        if (connecting.from !== null) {\n            setConnecting({ from: null, to: null });\n            setConnectionPreview(null);\n            setNearbyHandle(null);\n        }\n    };\n\n    const handleMouseMove = (e: React.MouseEvent) => {\n        if (!canvasRef.current) return;\n        \n        const rect = canvasRef.current.getBoundingClientRect();\n        const mouseX = e.clientX - rect.left;\n        const mouseY = e.clientY - rect.top;\n\n        // Handle node dragging\n        if (draggedId !== null) {\n            const x = mouseX - dragOffset.x;\n            const y = mouseY - dragOffset.y;\n            setLayers(prev => prev.map(l => l.id === draggedId ? { ...l, x, y } : l));\n        }\n\n        // Handle connection preview\n        if (connecting.from !== null) {\n            const fromLayer = layers.find(l => l.id === connecting.from);\n            if (fromLayer) {\n                const fromPos = getHandlePosition(fromLayer, 'output');\n                \n                // Check for nearby input handles\n                let closestHandle: number | null = null;\n                let minDistance = 30; // Snap distance\n                \n                layers.forEach(layer => {\n                    if (layer.id !== connecting.from) {\n                        const inputPos = getHandlePosition(layer, 'input');\n                        const distance = Math.sqrt(\n                            Math.pow(mouseX - inputPos.x, 2) + Math.pow(mouseY - inputPos.y, 2)\n                        );\n                        \n                        if (distance < minDistance) {\n                            minDistance = distance;\n                            closestHandle = layer.id;\n                        }\n                    }\n                });\n                \n                setNearbyHandle(closestHandle);\n                \n                // Set preview line\n                if (closestHandle) {\n                    const targetLayer = layers.find(l => l.id === closestHandle);\n                    if (targetLayer) {\n                        const targetPos = getHandlePosition(targetLayer, 'input');\n                        setConnectionPreview({\n                            from: fromPos,\n                            to: targetPos\n                        });\n                    }\n                } else {\n                    setConnectionPreview({\n                        from: fromPos,\n                        to: { x: mouseX, y: mouseY }\n                    });\n                }\n            }\n        }\n    };\n\n    // Inline parameter editing with proper type conversion\n    const handleParamChange = (id: number, param: string, value: string) => {\n        setLayers(prev => prev.map(l => {\n            if (l.id === id) {\n                let convertedValue: any = value;\n                \n                // Convert numeric strings to numbers\n                if (!isNaN(Number(value)) && value.trim() !== '') {\n                    convertedValue = Number(value);\n                }\n                \n                // Handle array inputs (for inputShape, outputShape)\n                if (param.includes('Shape') && typeof value === 'string') {\n                    try {\n                        // Parse comma-separated values as array\n                        convertedValue = value.split(',').map(v => Number(v.trim())).filter(v => !isNaN(v));\n                    } catch {\n                        convertedValue = value;\n                    }\n                }\n                \n                return { ...l, parameters: { ...l.parameters, [param]: convertedValue } };\n            }\n            return l;\n        }));\n    };\n\n    // Connection logic with handles\n    const handleConnectionStart = (id: number, type: 'input' | 'output', e: React.MouseEvent) => {\n        e.stopPropagation();\n        if (type === 'output') {\n            setConnecting({ from: id, to: null });\n        }\n    };\n\n    const handleConnectionEnd = (id: number, type: 'input' | 'output', e: React.MouseEvent) => {\n        e.stopPropagation();\n        if (type === 'input' && connecting.from !== null && connecting.from !== id) {\n            // Check if connection already exists\n            const existingConnectionIndex = connections.findIndex(\n                conn => conn.from === connecting.from && conn.to === id\n            );\n            \n            if (existingConnectionIndex !== -1) {\n                // Disconnect if connection exists\n                setConnections(prev => prev.filter((_, index) => index !== existingConnectionIndex));\n            } else {\n                // Connect if no connection exists\n                const fromId: number = connecting.from;\n                setConnections(prev => [...prev, { from: fromId, to: id }]);\n            }\n            \n            setConnecting({ from: null, to: null });\n            setConnectionPreview(null);\n            setNearbyHandle(null);\n        }\n    };\n\n    // Function to update node width after render - optimized to prevent infinite loops\n    const updateNodeWidth = useCallback((layerId: number, element: HTMLDivElement | null) => {\n        if (element) {\n            const currentWidth = element.offsetWidth;\n            \n            // Only update if width has actually changed\n            setLayers(prev => {\n                const existingLayer = prev.find(layer => layer.id === layerId);\n                if (existingLayer && existingLayer.width !== currentWidth) {\n                    return prev.map(layer => \n                        layer.id === layerId \n                            ? { ...layer, width: currentWidth }\n                            : layer\n                    );\n                }\n                return prev;\n            });\n        }\n    }, []);\n\n    // Use useEffect to measure width after initial render instead of ref callback\n    useEffect(() => {\n        layers.forEach(layer => {\n            if (!layer.width) {\n                const element = document.querySelector(`[data-layer-id=\"${layer.id}\"]`) as HTMLDivElement;\n                if (element) {\n                    const width = element.offsetWidth;\n                    setLayers(prev => prev.map(l => \n                        l.id === layer.id ? { ...l, width } : l\n                    ));\n                }\n            }\n        });\n    }, [layers.length]); // Only run when number of layers changes\n\n    // Helper function to get handle positions - using actual width\n    const getHandlePosition = (layer: DroppedLayer, type: 'input' | 'output') => {\n        if (type === 'input') {\n            return {\n                x: layer.x - 8,\n                y: layer.y + 50\n            };\n        } else {\n            // Use the actual measured width, fallback to estimated width\n            const nodeWidth = layer.width || 270;\n            return {\n                x: layer.x + nodeWidth + 8,\n                y: layer.y + 50\n            };\n        }\n    };\n\n    // Update connection line positions to connect handles\n    const getLayerCenter = (layer: DroppedLayer) => {\n        return {\n            x: layer.x + 60,\n            y: layer.y + 50\n        };\n    };\n\n    // Updated render connections to include preview\n    const renderConnections = () => {\n        const connectionLines = connections.map((connection, index) => {\n            const fromLayer = layers.find(l => l.id === connection.from);\n            const toLayer = layers.find(l => l.id === connection.to);\n            \n            if (!fromLayer || !toLayer) return null;\n            \n            const from = getHandlePosition(fromLayer, 'output');\n            const to = getHandlePosition(toLayer, 'input');\n            \n            return (\n                <line\n                    key={`connection-${index}`}\n                    x1={from.x}\n                    y1={from.y}\n                    x2={to.x}\n                    y2={to.y}\n                    stroke=\"#007acc\"\n                    strokeWidth=\"2\"\n                    markerEnd=\"url(#arrowhead)\"\n                />\n            );\n        });\n\n        // Add preview connection\n        const previewLine = connectionPreview && (\n            <line\n                key=\"preview\"\n                x1={connectionPreview.from.x}\n                y1={connectionPreview.from.y}\n                x2={connectionPreview.to.x}\n                y2={connectionPreview.to.y}\n                stroke={nearbyHandle ? \"#4caf50\" : \"#ffa726\"}\n                strokeWidth=\"2\"\n                strokeDasharray=\"5,5\"\n                markerEnd=\"url(#previewArrowhead)\"\n            />\n        );\n\n        return (\n            <svg\n                style={{\n                    position: 'absolute',\n                    top: 0,\n                    left: 0,\n                    width: '100%',\n                    height: '100%',\n                    pointerEvents: 'none',\n                    zIndex: 0\n                }}\n            >\n                <defs>\n                    <marker\n                        id=\"arrowhead\"\n                        markerWidth=\"10\"\n                        markerHeight=\"7\"\n                        refX=\"9\"\n                        refY=\"3.5\"\n                        orient=\"auto\"\n                    >\n                        <polygon\n                            points=\"0 0, 10 3.5, 0 7\"\n                            fill=\"#007acc\"\n                        />\n                    </marker>\n                    <marker\n                        id=\"previewArrowhead\"\n                        markerWidth=\"10\"\n                        markerHeight=\"7\"\n                        refX=\"9\"\n                        refY=\"3.5\"\n                        orient=\"auto\"\n                    >\n                        <polygon\n                            points=\"0 0, 10 3.5, 0 7\"\n                            fill={nearbyHandle ? \"#4caf50\" : \"#ffa726\"}\n                        />\n                    </marker>\n                </defs>\n                {connectionLines}\n                {previewLine}\n            </svg>\n        );\n    };\n\n    return (\n        <div\n            className=\"canvas\"\n            ref={canvasRef}\n            style={{ \n                minHeight: 500, \n                border: '1px solid #444', \n                position: 'relative', \n                overflow: 'hidden',\n                backgroundColor: '#1e1e1e'\n            }}\n            onMouseMove={handleMouseMove}\n            onMouseUp={handleMouseUp}\n            onClick={handleCanvasClick}\n            tabIndex={0}\n        >\n            <DropZone onDrop={handleDrop} />\n            \n            {/* Render connection lines */}\n            {renderConnections()}\n            \n            {/* Render blocks */}\n            {layers.map((layer) => {\n                const LayerComponent = layerComponentMap[layer.type];\n                if (!LayerComponent) return null;\n                \n                const isSelected = selectedLayerId === layer.id;\n                const isConnecting = connecting.from === layer.id;\n                const isNearbyTarget = nearbyHandle === layer.id;\n                \n                // Inline parameter editing UI for demo\n                const paramInputs = Object.keys(layer.parameters).map(param => {\n                    const value = layer.parameters[param];\n                    const displayValue = Array.isArray(value) ? value.join(', ') : String(value);\n                    \n                    return (\n                        <div key={param} style={{ marginBottom: 4 }}>\n                            <label style={{ fontSize: 12, color: '#ccc' }}>{param}: </label>\n                            <input\n                                style={{ \n                                    fontSize: 12, \n                                    width: 80,\n                                    backgroundColor: '#3a3a3a',\n                                    border: '1px solid #555',\n                                    color: '#ffffff',\n                                    padding: '2px 4px',\n                                    borderRadius: '2px'\n                                }}\n                                value={displayValue}\n                                onChange={e => handleParamChange(layer.id, param, e.target.value)}\n                                placeholder={param.includes('Shape') ? \"e.g. 28, 28, 1\" : \"\"}\n                                onMouseDown={(e) => e.stopPropagation()}\n                                onFocus={(e) => e.stopPropagation()}\n                            />\n                        </div>\n                    );\n                });\n                \n                return (\n                    <div key={layer.id}>\n                        {/* Input Handle */}\n                        <div\n                            style={{\n                                position: 'absolute',\n                                left: layer.x - 8,\n                                top: layer.y + 42,\n                                width: 16,\n                                height: 16,\n                                backgroundColor: isNearbyTarget ? '#81c784' : '#4caf50',\n                                borderRadius: '50%',\n                                border: '2px solid #ffffff',\n                                cursor: 'pointer',\n                                zIndex: 3,\n                                boxShadow: isNearbyTarget ? '0 0 8px rgba(129, 199, 132, 0.8)' : '0 2px 4px rgba(0, 0, 0, 0.3)',\n                                transform: isNearbyTarget ? 'scale(1.2)' : 'scale(1)',\n                                transition: 'all 0.2s ease'\n                            }}\n                            onMouseDown={(e) => handleConnectionStart(layer.id, 'input', e)}\n                            onMouseUp={(e) => handleConnectionEnd(layer.id, 'input', e)}\n                            title=\"Input - Click to connect from another node's output\"\n                        />\n                        \n                        {/* Main Node */}\n                        <div\n                            data-layer-id={layer.id}\n                            style={{\n                                position: 'absolute',\n                                left: layer.x,\n                                top: layer.y,\n                                background: isConnecting ? '#1e3a5f' : isSelected ? '#3a3a3a' : '#2d2d2d',\n                                border: isConnecting ? '2px solid #007acc' : isSelected ? '2px solid #ff6b6b' : '2px solid #555',\n                                borderRadius: 8,\n                                padding: 12,\n                                minWidth: 120,\n                                cursor: connecting.from !== null ? 'crosshair' : 'move',\n                                zIndex: draggedId === layer.id ? 2 : 1,\n                                color: '#ffffff',\n                                boxShadow: isSelected ? '0 0 10px rgba(255, 107, 107, 0.3)' : '0 2px 8px rgba(0, 0, 0, 0.3)',\n                                userSelect: 'none',\n                                WebkitUserSelect: 'none',\n                                MozUserSelect: 'none',\n                                msUserSelect: 'none'\n                            }}\n                            onMouseDown={e => handleMouseDown(layer.id, e)}\n                        >\n                            <LayerComponent {...layer.parameters} />\n                            <div style={{ marginTop: 8, userSelect: 'none' }}>{paramInputs}</div>\n                        </div>\n                        \n                        {/* Output Handle - Dynamic positioning */}\n                        <div\n                            style={{\n                                position: 'absolute',\n                                left: layer.x + (layer.width || 270) + 8,\n                                top: layer.y + 42,\n                                width: 16,\n                                height: 16,\n                                backgroundColor: '#f44336',\n                                borderRadius: '50%',\n                                border: '2px solid #ffffff',\n                                cursor: 'pointer',\n                                zIndex: 3,\n                                boxShadow: connecting.from === layer.id ? '0 0 8px rgba(244, 67, 54, 0.8)' : '0 2px 4px rgba(0, 0, 0, 0.3)',\n                                transform: connecting.from === layer.id ? 'scale(1.2)' : 'scale(1)',\n                                transition: 'all 0.2s ease'\n                            }}\n                            onMouseDown={(e) => handleConnectionStart(layer.id, 'output', e)}\n                            onMouseUp={(e) => handleConnectionEnd(layer.id, 'output', e)}\n                            title=\"Output - Click and drag to connect to another node's input\"\n                        />\n                    </div>\n                );\n            })}\n        </div>\n    );\n};\n\nexport default Canvas;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}